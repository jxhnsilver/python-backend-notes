**Comprehensions** (–≤ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–º –∫–æ–º—å—é–Ω–∏—Ç–∏ —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä—è—Ç _¬´–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å–ø–∏—Å–∫–æ–≤/—Å–ª–æ–≤–∞—Ä–µ–π¬ª_, –Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî **comprehensions**) ‚Äî —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –º–æ—â–Ω—ã—Ö –∏ –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã—Ö —Ñ–∏—á Python. –í–æ—Ç **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω**, –∫–∞–∫ –∏—Ö –æ—Å–≤–æ–∏—Ç—å –æ—Ç –Ω—É–ª—è –¥–æ —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ backend-–∫–æ–¥–µ.

## 1. –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ? (–¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è)
| –ù–∞–∑–≤–∞–Ω–∏–µ                 | –ê–Ω–≥–ª–∏–π—Å–∫–∏–π          | –ü—Ä–∏–º–µ—Ä                        |
| ------------------------ | ------------------- | ----------------------------- |
| **List comprehension**   | –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ø–∏—Å–∫–∞    | `[x*2 for x in range(5)]`     |
| **Dict comprehension**   | –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª–æ–≤–∞—Ä—è   | `{x: x**2 for x in range(3)}` |
| **Set comprehension**    | –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–Ω–æ–∂–µ—Å—Ç–≤–∞ | `{x % 2 for x in [1,2,3,4]}`  |
| **Generator expression** | –≤—ã—Ä–∞–∂–µ–Ω–∏–µ-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä | `(x*2 for x in range(5))`     |
–ü—Ä–∞–≤–∏–ª—å–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å: **¬´list comprehension¬ª**, –∞ –Ω–µ ¬´LINQ¬ª –∏–ª–∏ ¬´–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä¬ª (generator ‚Äî —ç—Ç–æ –¥—Ä—É–≥–æ–µ!).

## 2. –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ‚Äî –≤—ã—É—á–∏ —à–∞–±–ª–æ–Ω

### üìå List comprehension:
```python
[<–≤—ã—Ä–∞–∂–µ–Ω–∏–µ> for <–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è> in <–∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–π_–æ–±—ä–µ–∫—Ç> if <—É—Å–ª–æ–≤–∏–µ>]
```

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É:
#### –£—Ä–æ–≤–µ–Ω—å 1: –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
```python
# –ë—ã–ª–æ (—Ü–∏–∫–ª):
result = []
for x in [1, 2, 3]:
    result.append(x * 2)

# –°—Ç–∞–ª–æ (comprehension):
result = [x * 2 for x in [1, 2, 3]]
```
#### –£—Ä–æ–≤–µ–Ω—å 2: —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
```python
# –¢–æ–ª—å–∫–æ —á—ë—Ç–Ω—ã–µ —á–∏—Å–ª–∞, —É–º–Ω–æ–∂–µ–Ω–Ω—ã–µ –Ω–∞ 10
[x * 10 for x in range(10) if x % 2 == 0]
# ‚Üí [0, 20, 40, 60, 80]
```
#### –£—Ä–æ–≤–µ–Ω—å 3: —Å —Ä–∞—Å–ø–∞–∫–æ–≤–∫–æ–π
```python
users = [("Alice", 25), ("Bob", 30)]
names = [name for name, age in users if age > 25]
# ‚Üí ["Bob"]
```
#### –£—Ä–æ–≤–µ–Ω—å 4: –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã
```python
# –ü–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã
matrix = [[1, 2], [3, 4]]
flat = [num for row in matrix for num in row]
# ‚Üí [1, 2, 3, 4]
```
## üîπ 3. –°—Ä–∞–≤–Ω–∏ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏ ‚Äî –ø–æ–π–º—ë—à—å –≤—ã–≥–æ–¥—É
| –ó–∞–¥–∞—á–∞                  | –¶–∏–∫–ª      | Comprehension                      |
| ----------------------- | --------- | ---------------------------------- |
| –§–∏–ª—å—Ç—Ä + –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ | 4 —Å—Ç—Ä–æ–∫–∏  | 1 —Å—Ç—Ä–æ–∫–∞                           |
| –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å              | –Ω–∏–∂–µ      | –≤—ã—à–µ (–µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ—É—Å–µ—Ä–¥—Å—Ç–≤–æ–≤–∞—Ç—å)   |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å      | –º–µ–¥–ª–µ–Ω–Ω–µ–µ | –±—ã—Å—Ç—Ä–µ–µ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –≤ CPython) |
Comprehension ‚Äî **–Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ**, –∞ **–¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å**: ¬´—á—Ç–æ –Ω—É–∂–Ω–æ¬ª, –∞ –Ω–µ ¬´–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å¬ª.
## üîπ 4. –ü—Ä–∞–∫—Ç–∏–∫–∞: —Ä–µ—à–∏ —ç—Ç–∏ –∑–∞–¥–∞—á–∏ (–±–µ–∑ `map`/`filter`!)

1. **–°–ø–∏—Å–æ–∫ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 10**  
    ‚Üí `[x**2 for x in range(1, 11)]`
2. **–ò–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞—Ä—à–µ 18**  
    `users = [{"name": "A", "age": 20}, ...]`  
    ‚Üí `[u["name"] for u in users if u["age"] > 18]`
3. **–°–ª–æ–≤–∞—Ä—å: –±—É–∫–≤–∞ ‚Üí –µ—ë –ø–æ–∑–∏—Ü–∏—è –≤ –∞–ª—Ñ–∞–≤–∏—Ç–µ**  
    ‚Üí `{chr(ord('a') + i): i+1 for i in range(26)}`
4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–≤—ã—Ö –±—É–∫–≤ –∏–º—ë–Ω**  
    `names = ["Alice", "Bob", "Anna"]`  
    ‚Üí `{name[0] for name in names}`
5. **–°–ø–∏—Å–æ–∫ –ø–∞—Ä (–∏–Ω–¥–µ–∫—Å, –∑–Ω–∞—á–µ–Ω–∏–µ) –¥–ª—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª**  
    ‚Üí `[(i, x) for i, x in enumerate(nums) if x > 0]`
## üîπ 5. –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å comprehensions

- –ï—Å–ª–∏ –ª–æ–≥–∏–∫–∞ **—Å–ª–æ–∂–Ω–µ–µ 2 —É—Å–ª–æ–≤–∏–π** ‚Üí –ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é + —Ü–∏–∫–ª.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ **–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `counter += 1`) ‚Üí –Ω–µ–ª—å–∑—è –≤ comprehension.
- –ï—Å–ª–∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å **–ø–∞–¥–∞–µ—Ç** ‚Üí –ª—É—á—à–µ –æ–±—ã—á–Ω—ã–π —Ü–∏–∫–ª.

‚ùå –ü–ª–æ—Ö–æ:
```python
# –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ!
result = [process(x) for x in data if validate(x) and x not in cache and (x > 0 or debug)]
```
‚úÖ –õ—É—á—à–µ:
```python
result = []
for x in data:
    if not validate(x):
        continue
    if x in cache:
        continue
    if x <= 0 and not debug:
        continue
    result.append(process(x))
```
## üîπ 6. –°–æ–≤–µ—Ç—ã –¥–ª—è backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
1. **–ò—Å–ø–æ–ª—å–∑—É–π –≤ DTO-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è—Ö**:
```python
user_ids = [user.id for user in users if user.is_active]
```
2. **–§–∏–ª—å—Ç—Ä—É–π –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API**:
```python
public_profiles = [
    {"name": u.name, "role": u.role}
    for u in users
    if u.role != "admin"
]
```
3. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤**:
```python
# ‚ùå –ù–ï –î–ï–õ–ê–ô –¢–ê–ö!
[send_email(u) for u in users]  # —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è ‚Äî –≥—Ä—è–∑–Ω—ã–π —Ö–∞–∫
```
