**Filesystem caching в Django** — это способ кэширования, при котором **каждое значение кэша сохраняется как отдельный файл** в указанной директории на диске.

## Как это работает

- Ты вызываешь:
```python
cache.set("user_123", {"name": "Alice"})
```
- Django:
    1. Сериализует значение (по умолчанию через `pickle`),
    2. Генерирует имя файла на основе ключа (например, `user_123.cache`),
    3. Сохраняет байты в файл внутри указанной папки (например, `/var/tmp/django_cache/user_123.cache`).
- При `cache.get("user_123")` — Django читает этот файл и десериализует его.
## Настройка
```python
CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.filebased.FileBasedCache",
        "LOCATION": "/var/tmp/django_cache",  # абсолютный путь
    }
}
```
Папка должна **существовать** и быть **доступна для записи** пользователю, от которого запущен веб-сервер (например, `www-data`, `apache`).

## Плюсы

- **Не требует внешних сервисов** (Redis, Memcached).
- **Данные переживают перезапуск** (в отличие от in-memory кэшей).
- Простота: работает «из коробки».

## ❌ Минусы и риски

### 1. **Безопасность: pickle + файлы = RCE**

- Кэш сериализуется через `pickle`.
- Если злоумышленник получит доступ к файлам кэша (например, через утечку директории), он может **подсунуть вредоносный pickle**.
- При чтении — **выполнится произвольный код**.

> ⚠️ **Никогда не размещай папку кэша внутри `MEDIA_ROOT`, `STATIC_ROOT` или публичных директорий!**

### 2. **Производительность: тысячи файлов = тормоза**

- Файловая система плохо масштабируется при большом числе файлов (особенно на HDD).
- Чтение/запись — **медленнее**, чем RAM (Redis/Memcached).
- Нет эффективной стратегии удаления старых файлов («culling») по умолчанию.

### 3. **Проблемы с многопроцессностью**

- Если у тебя несколько воркеров (Gunicorn, Uvicorn), они **все пишут в одну папку**.
- Возможны **гонки записи/удаления**, особенно при высокой нагрузке.

## Когда использовать?

| Сценарий                                         | Подходит?                                 |
| ------------------------------------------------ | ----------------------------------------- |
| Локальная разработка, нет Redis                  | ✅ Да (временно)                           |
| Shared-хостинг без Redis, но с доступом к файлам | ✅ Да (крайний случай)                     |
| Высоконагруженный продакшен                      | ❌ Нет                                     |
| Кэш с частыми записями (>1000 ключей)            | ❌ Нет                                     |
| Требуется безопасность                           | ❌ Нет (если не заменить `pickle` на JSON) |
## Рекомендации

1. **Используй только для разработки или legacy-хостинга.**
2. **Папка кэша должна быть вне публичного доступа.**
3. **Не кэшируй чувствительные данные.**
4. **Для продакшена — всегда предпочитай Redis.**
## ✅ Вывод

> **Filesystem caching — это fallback-вариант**, когда нет возможности использовать in-memory кэш.  
> Он **простой, но медленный и небезопасный**.  
> В современной разработке **практически не используется** — Redis доступен даже в Docker за 2 минуты.

