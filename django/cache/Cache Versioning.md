### –ó–∞—á–µ–º?

–ö–æ–≥–¥–∞ —Ç—ã **–º–µ–Ω—è–µ—à—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö** –≤ –∫—ç—à–µ, —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è **–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏**, –Ω–æ:

- **–û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ –∫—ç—à–∞** ‚Äî –¥–æ—Ä–æ–≥–æ (—Ç–µ—Ä—è—é—Ç—Å—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ),
- **–†—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π** ‚Äî —Å–ª–æ–∂–Ω–æ (–∏—Ö —Ç—ã—Å—è—á–∏).

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

Django –¥–æ–±–∞–≤–ª—è–µ—Ç **–≤–µ—Ä—Å–∏—é** –∫ –∫–ª—é—á—É:
```python
# settings.py
CACHES = {
    "default": {
        "BACKEND": "...",
        "VERSION": 2,  # ‚Üê –≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
    }
}
```
‚Üí –ö–ª—é—á `"user_123"` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ `"prefix:2:user_123"`.
### –ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏:
```python
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –≤–µ—Ä—Å–∏–∏ 2
cache.set("my_key", "data", version=2)

# –ü–æ–ª—É—á–∏—Ç—å –≤–µ—Ä—Å–∏—é 2
cache.get("my_key", version=2)  # ‚Üí "data"

# –£–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫–ª—é—á–∞ (–∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—É—é)
cache.incr_version("my_key")  # —Ç–µ–ø–µ—Ä—å –∞–∫—Ç–∏–≤–Ω–∞ –≤–µ—Ä—Å–∏—è 3

cache.get("my_key", version=2)  # ‚Üí None
cache.get("my_key", version=3)  # ‚Üí "data"
```
### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

1. –£ —Ç–µ–±—è –∫—ç—à –ø—Ä–æ—Ñ–∏–ª–µ–π: `{"name": "Alice"}`
2. –¢—ã –¥–æ–±–∞–≤–ª—è–µ—à—å –ø–æ–ª–µ `avatar_url`
3. –ú–µ–Ω—è–µ—à—å `VERSION = 2` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
4. –í—Å–µ **–Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
5. **–°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (–∏—Ö –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç)

‚Üí **–ù–µ—Ç –æ—à–∏–±–æ–∫, –Ω–µ—Ç —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏.**
## –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Prefix + Version

–§–∏–Ω–∞–ª—å–Ω—ã–π –∫–ª—é—á —Å—Ç—Ä–æ–∏—Ç—Å—è –∫–∞–∫:  
`f"{KEY_PREFIX}:{VERSION}:{user_key}"`

–ü—Ä–∏–º–µ—Ä:

- `KEY_PREFIX = "shop"`
- `VERSION = 3`
- –ö–ª—é—á = `"product_456"`

‚Üí –í Redis —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è: `"shop:3:product_456"`
## –°–æ–≤–µ—Ç—ã –¥–ª—è –¥–∂—É–Ω–∏–æ—Ä–∞

| –°–∏—Ç—É–∞—Ü–∏—è                             | –ß—Ç–æ –¥–µ–ª–∞—Ç—å                                                  |
| ------------------------------------ | ----------------------------------------------------------- |
| –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –æ–¥–Ω–æ–º Redis     | –£ –∫–∞–∂–¥–æ–≥–æ ‚Äî —Å–≤–æ–π `KEY_PREFIX`                               |
| –û–±–Ω–æ–≤–∏–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫—ç—à–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö  | –£–≤–µ–ª–∏—á—å `VERSION`                                           |
| –ù—É–∂–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ò—Å–ø–æ–ª—å–∑—É–π `cache.incr_version("product_list")`              |
| –†–∞–±–æ—Ç–∞–µ—à—å –ª–æ–∫–∞–ª—å–Ω–æ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ    | –í dev ‚Äî `KEY_PREFIX = "myapp_dev"`, –≤ prod ‚Äî `"myapp_prod"` |
## –í–∞–∂–Ω–æ

- `KEY_PREFIX` –∏ `VERSION` —Ä–∞–±–æ—Ç–∞—é—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚Äî —Ç—ã –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—à—å –∏—Ö –≤ `cache.set("key")`.
- –ù–æ —Ç—ã **–º–æ–∂–µ—à—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–µ—Ä—Å–∏—é** –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç `version=...`.
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–π –ø—Ä–µ—Ñ–∏–∫—Å –±–µ–∑ —Å–º–µ–Ω—ã –≤–µ—Ä—Å–∏–∏** ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞.

---

## üíé –í—ã–≤–æ–¥

> **`KEY_PREFIX` ‚Äî –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π.**  
> **`VERSION` ‚Äî –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.**  
> –í–º–µ—Å—Ç–µ –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç **—É–ø—Ä–∞–≤–ª—è—Ç—å –∫—ç—à–µ–º –∫–∞–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª**, –±–µ–∑ —Ä–∏—Å–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–æ—Å—Ç–æ–µ–≤.