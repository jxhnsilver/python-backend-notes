### –ß—Ç–æ —Ç–∞–∫–æ–µ historical models?

–≠—Ç–æ **–≤–µ—Ä—Å–∏–∏ –≤–∞—à–∏—Ö –º–æ–¥–µ–ª–µ–π, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏**.  
–û–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–π** –∏ –≤–æ—Å—Å–æ–∑–¥–∞—é—Ç—Å—è Django –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `migrate`.
### ‚ùó –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –Ω–∞–ø—Ä—è–º—É—é?

–ï—Å–ª–∏ –≤ `RunPython` —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:
```python
from myapp.models import Book  # ‚ùå –ü–õ–û–•–û
```
‚Äî —Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ **—Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –º–æ–¥–µ–ª–∏**, –∞ –Ω–µ —Ç—É, —á—Ç–æ –±—ã–ª–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**

- –ú–∏–≥—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å **—Å–µ–π—á–∞—Å**, –Ω–æ **—Å–ª–æ–º–∞–µ—Ç—Å—è –≤ –±—É–¥—É—â–µ–º**, –∫–æ–≥–¥–∞ –º–æ–¥–µ–ª—å –∏–∑–º–µ–Ω–∏—Ç—Å—è.
- –ü—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–æ–≤–∞—è –ë–î + –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –Ω—É–ª—è) ‚Äî –æ—à–∏–±–∫–∞.
### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `apps.get_model()`
```python
def migrate_data(apps, schema_editor):
    Book = apps.get_model("myapp", "Book")  # ‚úÖ historical model
    for book in Book.objects.all():
        book.slug = book.title.lower()
        book.save()
```
‚Üí –≠—Ç–∞ –º–æ–¥–µ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç **—Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞ –º–æ–º–µ–Ω—Ç –º–∏–≥—Ä–∞—Ü–∏–∏**.

### ‚ö†Ô∏è –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ historical models?

- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: `save()`, `__init__()`, `get_absolute_url()` –∏ —Ç.–¥. ‚Äî **–∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è**.
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã** ‚Äî –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.
- **–û–±—ã—á–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã** ‚Äî –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, **—Ç–æ–ª—å–∫–æ —Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö**:
```python
class MyManager(models.Manager):
    use_in_migrations = True
```
‚Üí –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `.save()` ‚Äî **–Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∞—à –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π `save()`!**
### üîí –ß—Ç–æ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è (–∏ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –∫–æ–¥–µ)?

Django —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –≤ –º–∏–≥—Ä–∞—Ü–∏—é:

- `upload_to` (–µ—Å–ª–∏ —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è),
- `limit_choices_to`,
- –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å `use_in_migrations=True`,
- –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è (`class ISBNField(models.CharField): ...`).

**‚Üí –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–ª–∞—Å—Å—ã –∏ –ø–æ–ª—è –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å**, –ø–æ–∫–∞ –µ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ –Ω–∏—Ö —Å—Å—ã–ª–∞—é—Ç—Å—è.

–¢–æ –∂–µ –∫–∞—Å–∞–µ—Ç—Å—è **–±–∞–∑–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –º–æ–¥–µ–ª–∏** ‚Äî –∏—Ö —Ç–æ–∂–µ –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å, –µ—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –Ω–∏—Ö —Å—Å—ã–ª–∞–µ—Ç—Å—è.

---

### üßπ –ö–∞–∫ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π?

1. **Squash –º–∏–≥—Ä–∞—Ü–∏–∏** ‚Äî –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤ –æ–¥–Ω—É, —É–±—Ä–∞–≤ —Å—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏.
2. **–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏/–∫–ª–∞—Å—Å—ã –ø—Ä—è–º–æ –≤ —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏** (–µ—Å–ª–∏ –∏—Ö –Ω–µ–º–Ω–æ–≥–æ).

---

### ‚úÖ –ò—Ç–æ–≥

- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `apps.get_model()` –≤ `RunPython`.
- –ù–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–π –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—É—é –ª–æ–≥–∏–∫—É –º–æ–¥–µ–ª–µ–π ‚Äî –µ—ë **–Ω–µ—Ç** –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö.
- –ù–µ —É–¥–∞–ª—è–π —Ñ—É–Ω–∫—Ü–∏–∏, –º–µ–Ω–µ–¥–∂–µ—Ä—ã, –ø–æ–ª—è –∏ –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã, –ø–æ–∫–∞ –µ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç.